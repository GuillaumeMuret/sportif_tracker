{"changed":true,"filter":false,"title":"UartReceive.java","tooltip":"/UartReceive.java","value":"import java.io.BufferedReader;\nimport java.io.InputStreamReader;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.LinkedList;\nimport java.util.List;\n\n\npublic class UartReceive {\n    \n\n    class LaunchScript extends Thread {\n        public Process processLaunch = null;\n        String processLaunchError, launchOutput;\n        List<String> cmd = new ArrayList<String>();\n    \n        public void run(){\n    \n            try{\n                //Build command by adding arguments\n                //cmd.add(\"python\");\n                //cmd.add(\"/var/lib/cloud9/examples/serialReceiveHR.py\");\n                cmd.add(\"/var/lib/cloud9/examples/launchUartReceivePyScript.sh\");\n                System.out.println(cmd);\n        \n                //Run macro on target\n                ProcessBuilder pb = new ProcessBuilder(cmd);\n                pb.redirectErrorStream(true);\n                /*UartReceive.CommandReader commandReader = new UartReceive.CommandReader(pb.start(), processLaunchError, launchOutput);\n                commandReader.start();\n                Process process = pb.start();\n                process.waitFor();\n                BufferedReader brLaunch_error = new BufferedReader(\n                    new InputStreamReader(process.getErrorStream()));\n                BufferedReader brLaunch_input = new BufferedReader(\n                    new InputStreamReader(process.getInputStream()));\n                while ((launchOutput = brLaunch_input.readLine()) != null){\n                    System.out.println(\"Line read\");\n                    handle(launchOutput);\n                }\n                while ((processLaunchError = brLaunch_error.readLine()) != null){\n                }\n            \n                if (process.waitFor()==0){\n                    System.exit(0);\n                }*/\n            \n                System.err.println(processLaunchError.toString());\n                System.exit(1);\n                while(true);\n                \n            } catch (Exception e){\n                e.printStackTrace();\n            }\n        }\n    }\n    \n    public class CommandReader extends Thread{\n        private Process process;\n        private String processLaunchError, launchOutput;\n        public CommandReader(Process process, String processLaunchError, String launchOutput){\n            this.process = process;\n            this.processLaunchError=processLaunchError;\n            this.launchOutput=launchOutput;\n        }\n        \n        public void run(){\n            try{\n                System.out.println(\"In thread CommandReader\");\n                BufferedReader brLaunch_error = new BufferedReader(\n                        new InputStreamReader(process.getErrorStream()));\n                BufferedReader brLaunch_input = new BufferedReader(\n                        new InputStreamReader(process.getInputStream()));\n                System.out.println(\"In thread CommandReader\");\n                \n                \n                while ((launchOutput = brLaunch_input.readLine()) != null){\n                    System.out.println(\"Line read\");\n                    handle(launchOutput);\n                }\n                while ((processLaunchError = brLaunch_error.readLine()) != null){\n                }\n                \n                if (process.waitFor()==0){\n                    System.exit(0);\n                }\n            } catch (Exception e){\n                    e.printStackTrace();\n            }\n            \n            System.err.println(processLaunchError.toString());\n            System.exit(1);\n        }\n    }\n    \n    public void handle(String launchOutput){\n        System.out.println(\"In handle\");\n        System.out.println(launchOutput);\n    }\n    \n    public static void main(String args[]) {\n        LaunchScript launchScript = new UartReceive().new LaunchScript();\n        \n        try{\n            launchScript.start();\n            \n        }catch(Exception e){\n            e.printStackTrace();\n            System.exit(-1);\n        }\n    }\n}","undoManager":{"mark":96,"position":100,"stack":[[{"start":{"row":22,"column":25},"end":{"row":22,"column":26},"action":"insert","lines":["s"],"id":216}],[{"start":{"row":22,"column":26},"end":{"row":22,"column":27},"action":"insert","lines":["t"],"id":217}],[{"start":{"row":22,"column":27},"end":{"row":22,"column":28},"action":"insert","lines":["d"],"id":218}],[{"start":{"row":22,"column":28},"end":{"row":22,"column":29},"action":"insert","lines":["o"],"id":219}],[{"start":{"row":22,"column":29},"end":{"row":22,"column":30},"action":"insert","lines":["u"],"id":220}],[{"start":{"row":22,"column":30},"end":{"row":22,"column":31},"action":"insert","lines":["t"],"id":221}],[{"start":{"row":21,"column":0},"end":{"row":22,"column":34},"action":"remove","lines":["                cmd.add(\">\");","                cmd.add(\"stdout\");"],"id":222}],[{"start":{"row":20,"column":81},"end":{"row":21,"column":0},"action":"remove","lines":["",""],"id":223}],[{"start":{"row":20,"column":16},"end":{"row":20,"column":17},"action":"insert","lines":["/"],"id":224}],[{"start":{"row":20,"column":17},"end":{"row":20,"column":18},"action":"insert","lines":["/"],"id":225}],[{"start":{"row":19,"column":17},"end":{"row":19,"column":18},"action":"remove","lines":["/"],"id":226}],[{"start":{"row":19,"column":16},"end":{"row":19,"column":17},"action":"remove","lines":["/"],"id":227}],[{"start":{"row":18,"column":16},"end":{"row":18,"column":17},"action":"remove","lines":["/"],"id":228}],[{"start":{"row":18,"column":16},"end":{"row":18,"column":17},"action":"remove","lines":["/"],"id":229}],[{"start":{"row":5,"column":22},"end":{"row":6,"column":0},"action":"insert","lines":["",""],"id":230}],[{"start":{"row":69,"column":16},"end":{"row":69,"column":17},"action":"insert","lines":["/"],"id":231}],[{"start":{"row":69,"column":16},"end":{"row":69,"column":17},"action":"remove","lines":["/"],"id":232}],[{"start":{"row":66,"column":16},"end":{"row":66,"column":17},"action":"insert","lines":[":"],"id":233}],[{"start":{"row":66,"column":17},"end":{"row":66,"column":18},"action":"insert","lines":["*"],"id":234}],[{"start":{"row":66,"column":17},"end":{"row":66,"column":18},"action":"remove","lines":["*"],"id":235}],[{"start":{"row":66,"column":16},"end":{"row":66,"column":17},"action":"remove","lines":[":"],"id":236}],[{"start":{"row":67,"column":16},"end":{"row":67,"column":17},"action":"insert","lines":["/"],"id":237}],[{"start":{"row":67,"column":17},"end":{"row":67,"column":18},"action":"insert","lines":["*"],"id":238}],[{"start":{"row":71,"column":86},"end":{"row":71,"column":87},"action":"insert","lines":["*"],"id":239}],[{"start":{"row":71,"column":87},"end":{"row":71,"column":88},"action":"insert","lines":["/"],"id":240}],[{"start":{"row":72,"column":0},"end":{"row":72,"column":4},"action":"insert","lines":["    "],"id":241}],[{"start":{"row":72,"column":4},"end":{"row":72,"column":8},"action":"insert","lines":["    "],"id":242}],[{"start":{"row":72,"column":8},"end":{"row":72,"column":12},"action":"insert","lines":["    "],"id":243}],[{"start":{"row":72,"column":12},"end":{"row":72,"column":16},"action":"insert","lines":["    "],"id":244}],[{"start":{"row":72,"column":16},"end":{"row":73,"column":0},"action":"insert","lines":["",""],"id":245},{"start":{"row":73,"column":0},"end":{"row":73,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"remove","lines":["    "],"id":246}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"remove","lines":["    "],"id":247}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"remove","lines":["    "],"id":248}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"remove","lines":["    "],"id":249}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"remove","lines":["    "],"id":250}],[{"start":{"row":71,"column":0},"end":{"row":71,"column":4},"action":"remove","lines":["    "],"id":251}],[{"start":{"row":67,"column":17},"end":{"row":67,"column":18},"action":"remove","lines":["*"],"id":252}],[{"start":{"row":67,"column":16},"end":{"row":67,"column":17},"action":"remove","lines":["/"],"id":253}],[{"start":{"row":71,"column":63},"end":{"row":71,"column":64},"action":"remove","lines":["/"],"id":254}],[{"start":{"row":71,"column":62},"end":{"row":71,"column":63},"action":"remove","lines":["*"],"id":255}],[{"start":{"row":26,"column":16},"end":{"row":26,"column":17},"action":"insert","lines":["/"],"id":256}],[{"start":{"row":26,"column":17},"end":{"row":26,"column":18},"action":"insert","lines":["*"],"id":257}],[{"start":{"row":28,"column":38},"end":{"row":28,"column":39},"action":"insert","lines":["*"],"id":258}],[{"start":{"row":28,"column":39},"end":{"row":28,"column":40},"action":"insert","lines":["/"],"id":259}],[{"start":{"row":29,"column":17},"end":{"row":29,"column":18},"action":"remove","lines":["*"],"id":260}],[{"start":{"row":29,"column":16},"end":{"row":29,"column":17},"action":"remove","lines":["/"],"id":261}],[{"start":{"row":46,"column":32},"end":{"row":46,"column":33},"action":"remove","lines":["/"],"id":262}],[{"start":{"row":46,"column":31},"end":{"row":46,"column":32},"action":"remove","lines":["*"],"id":263}],[{"start":{"row":47,"column":16},"end":{"row":47,"column":17},"action":"insert","lines":["/"],"id":264}],[{"start":{"row":47,"column":17},"end":{"row":47,"column":18},"action":"insert","lines":["/"],"id":265}],[{"start":{"row":8,"column":26},"end":{"row":9,"column":0},"action":"insert","lines":["",""],"id":266},{"start":{"row":9,"column":0},"end":{"row":9,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":52,"column":13},"end":{"row":52,"column":14},"action":"insert","lines":["*"],"id":283}],[{"start":{"row":52,"column":14},"end":{"row":52,"column":15},"action":"insert","lines":["/"],"id":284}],[{"start":{"row":52,"column":14},"end":{"row":52,"column":15},"action":"remove","lines":["/"],"id":285}],[{"start":{"row":52,"column":13},"end":{"row":52,"column":14},"action":"remove","lines":["*"],"id":286}],[{"start":{"row":30,"column":45},"end":{"row":31,"column":0},"action":"insert","lines":["",""],"id":314},{"start":{"row":31,"column":0},"end":{"row":31,"column":16},"action":"insert","lines":["                "]}],[{"start":{"row":31,"column":16},"end":{"row":31,"column":17},"action":"insert","lines":["p"],"id":315}],[{"start":{"row":31,"column":17},"end":{"row":31,"column":18},"action":"insert","lines":["r"],"id":316}],[{"start":{"row":31,"column":18},"end":{"row":31,"column":19},"action":"insert","lines":["o"],"id":317}],[{"start":{"row":31,"column":19},"end":{"row":31,"column":20},"action":"insert","lines":["c"],"id":318}],[{"start":{"row":31,"column":20},"end":{"row":31,"column":21},"action":"insert","lines":["e"],"id":319}],[{"start":{"row":31,"column":21},"end":{"row":31,"column":22},"action":"insert","lines":["s"],"id":320}],[{"start":{"row":31,"column":22},"end":{"row":31,"column":23},"action":"insert","lines":["s"],"id":321}],[{"start":{"row":31,"column":23},"end":{"row":31,"column":24},"action":"insert","lines":["."],"id":322}],[{"start":{"row":31,"column":24},"end":{"row":31,"column":25},"action":"insert","lines":["w"],"id":323}],[{"start":{"row":31,"column":25},"end":{"row":31,"column":26},"action":"insert","lines":["a"],"id":324}],[{"start":{"row":31,"column":26},"end":{"row":31,"column":27},"action":"insert","lines":["i"],"id":325}],[{"start":{"row":31,"column":27},"end":{"row":31,"column":28},"action":"insert","lines":["t"],"id":326}],[{"start":{"row":31,"column":24},"end":{"row":31,"column":28},"action":"remove","lines":["wait"],"id":327},{"start":{"row":31,"column":24},"end":{"row":31,"column":31},"action":"insert","lines":["waitFor"]}],[{"start":{"row":31,"column":31},"end":{"row":31,"column":33},"action":"insert","lines":["()"],"id":328}],[{"start":{"row":31,"column":33},"end":{"row":31,"column":34},"action":"insert","lines":[";"],"id":329}],[{"start":{"row":31,"column":16},"end":{"row":31,"column":17},"action":"insert","lines":["/"],"id":330}],[{"start":{"row":31,"column":17},"end":{"row":31,"column":18},"action":"insert","lines":["/"],"id":331}],[{"start":{"row":49,"column":17},"end":{"row":49,"column":18},"action":"remove","lines":["/"],"id":332}],[{"start":{"row":49,"column":16},"end":{"row":49,"column":17},"action":"remove","lines":["/"],"id":333}],[{"start":{"row":27,"column":17},"end":{"row":27,"column":18},"action":"remove","lines":["*"],"id":334}],[{"start":{"row":27,"column":16},"end":{"row":27,"column":17},"action":"remove","lines":["/"],"id":335}],[{"start":{"row":29,"column":39},"end":{"row":29,"column":40},"action":"remove","lines":["/"],"id":336}],[{"start":{"row":29,"column":38},"end":{"row":29,"column":39},"action":"remove","lines":["*"],"id":337}],[{"start":{"row":30,"column":16},"end":{"row":30,"column":17},"action":"insert","lines":["/"],"id":338}],[{"start":{"row":30,"column":17},"end":{"row":30,"column":18},"action":"insert","lines":["/"],"id":339}],[{"start":{"row":43,"column":16},"end":{"row":43,"column":17},"action":"insert","lines":["/"],"id":340}],[{"start":{"row":43,"column":17},"end":{"row":43,"column":18},"action":"insert","lines":["*"],"id":341}],[{"start":{"row":45,"column":17},"end":{"row":45,"column":18},"action":"insert","lines":["*"],"id":342}],[{"start":{"row":45,"column":18},"end":{"row":45,"column":19},"action":"insert","lines":["/"],"id":343}],[{"start":{"row":31,"column":16},"end":{"row":31,"column":17},"action":"remove","lines":["/"],"id":344}],[{"start":{"row":31,"column":16},"end":{"row":31,"column":17},"action":"remove","lines":["/"],"id":345}],[{"start":{"row":30,"column":17},"end":{"row":30,"column":18},"action":"remove","lines":["/"],"id":346}],[{"start":{"row":30,"column":17},"end":{"row":30,"column":18},"action":"insert","lines":["*"],"id":347}],[{"start":{"row":43,"column":17},"end":{"row":43,"column":18},"action":"remove","lines":["*"],"id":348}],[{"start":{"row":43,"column":16},"end":{"row":43,"column":17},"action":"remove","lines":["/"],"id":349}],[{"start":{"row":20,"column":16},"end":{"row":20,"column":17},"action":"insert","lines":["/"],"id":350}],[{"start":{"row":20,"column":17},"end":{"row":20,"column":18},"action":"insert","lines":["/"],"id":351}],[{"start":{"row":21,"column":16},"end":{"row":21,"column":17},"action":"insert","lines":["/"],"id":352}],[{"start":{"row":21,"column":17},"end":{"row":21,"column":18},"action":"insert","lines":["/"],"id":353}],[{"start":{"row":22,"column":16},"end":{"row":22,"column":17},"action":"remove","lines":["/"],"id":354}],[{"start":{"row":22,"column":16},"end":{"row":22,"column":17},"action":"remove","lines":["/"],"id":355}],[{"start":{"row":30,"column":16},"end":{"row":30,"column":17},"action":"remove","lines":["/"],"id":356}],[{"start":{"row":30,"column":16},"end":{"row":30,"column":17},"action":"remove","lines":["*"],"id":357}],[{"start":{"row":28,"column":16},"end":{"row":28,"column":17},"action":"insert","lines":["/"],"id":358}],[{"start":{"row":28,"column":17},"end":{"row":28,"column":18},"action":"insert","lines":["*"],"id":359}]]},"ace":{"folds":[],"scrolltop":201,"scrollleft":0,"selection":{"start":{"row":27,"column":45},"end":{"row":27,"column":45},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":12,"state":"start","mode":"ace/mode/java"}},"timestamp":1516236122122}